import fs from "fs";
import {ManifestPath, DependenciesCacheFilename} from "./Config.js";


function loadDependencies(){
    const rawManifest = fs.readFileSync(ManifestPath);
    const dependenciesRaw = fs.readFileSync(DependenciesCacheFilename);
    const dependencies = JSON.parse(dependenciesRaw.toString().trim());
    const manifest = JSON.parse(rawManifest.toString().trim());

    manifest.dependencies = dependencies;

    console.log(manifest.version);
    fs.writeFileSync(ManifestPath, JSON.stringify(manifest, null, 3));
    fs.unlinkSync(DependenciesCacheFilename);
}

loadDependencies();